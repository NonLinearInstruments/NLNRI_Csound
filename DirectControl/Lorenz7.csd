<CsoundSynthesizer><CsInstruments>sr=44100kr=22050ksmps=2nchnls=2instr 1;==============================================================================================================;==============================================================================================================;;;	LORENZ TIME SERIES;	Ignasi Álvarez Garriga 1998;	rev. 2005;;;==============================================================================================================;	Uncomment the score i statements or use the score events on i/o !!;==============================================================================================================;;		;		The original Lorenz system of equations is:;;			Dx=A*(x-y);			Dy=B*x-y-z*x;			Dz=x*y-C*z;;		To build an audio instrument with it, we will use the Heun's integration method.;		;		A, B and C parameters will have realtime control using Csound i/o features.;;		The Dt, or integration step, will have realtime control too.;;		Due to sensibility to initial conditions, dense periodic points, and mixing properties,;		the Lorenz system reacts differently to N iterations with M size Dt, than to n*N iterations;		at size Dt/n (non-linearity). That is why we may need the "zoom" trick in adittion to variable length;		Dt steps. For convenience, the zoom parameter runs as an init P-parameter on .sco, as the loop algorithm,;		with its 'if' operator, would otherwise not accept it. I am listening to any suggestions in this point ...;;		As enough processing power is available, we are supposed to be able to run more than one instance;		of this instrument using score statements: for the case in wich we run it simultaneously, the;		p7, p8, and p9 score parameters will allow to introduce a "chorus" effect naturally derivating;		from sensibility to initial conditions property of the system.;;		;		SCORE PARAMETERS;;		p4 = zoom (time we run the integration loop for each audio sample / las veces que corremos el bucle de;				integración para cada muestra de audio );		p5=pan L ; Simple stereo image weighting / Sencillo balanceado de la imágen estéreo;		p6=pan R;		p7 = diferential to kbparamA;		p8 = diferential to KbparamB;		p9 = diferential to KnparamC;		____________________________________________________________________________________________________;;;		El sistema de ecuaciones de Lorenz original es:;;			Dx=A*(x-y);			Dy=B*x-y-z*x;			Dz=x*y-C*z;;		Para construir un instrumento de audio con ellas, utilizaremos la integración por el método de Heun.;		;		Los parámetros A, B y C tendrán control a tiempo real utilizando las prestaciones de i/o de Csound.;;		También tendrá control a tiempo real el paso de integración Dt.;;		Debido sus propiedades de sensibilidad a las condiciones iniciales, densidad de puntos periódicos y mezcolanza,;		el sistema de Lorenz reacciona de modo distinto a N iteraciones con paso Dt de tamaño M, que a N*2 iteraciones;		con tamaño de paso Dt/2 (no-linealidad). Por esa razón se necesita el truco de "zoom" además de la longitud;		variable en los pasos de Dt. Por conveniencia, el parámetro zoom es un P-parámetro incial en .sco, ya que el;		algoritmo del bucle, con su operador 'if', no lo aceptaría de otro modo. Agradeceré sugerencias sobre este punto...;;		A medida que dispongamos de suficiente capacidad de proceso, se supone que podremos ejecutar más de una;		instancia de este instrumento mediante las entradas en el score: para el caso en que se ejecuten simultánneamente,;		los parámetros p7, p8 y p9 del score permiten introducir un efecto de "chorus" natural derivado de la propiedad;		de sensibilidad a las condiciones iniciales del sistema.;;;		PARÁMETROS DE SCORE;;		p4 = zoom ( numero de veces que corremos el bucle de integración para cada muestra de audio );		p5=pan L ; Sencillo balanceado de la imágen estéreo;		p6=pan R;		p7 = diferential to kbparamA;		p8 = diferential to KbparamB;		p9 = diferential to KnparamC;;		;		;==============================================================================================================;==============================================================================================================;ka invalue "kparamA"kb invalue "kparamB"kc invalue "kparamC"kdt invalue "kdtparam"kdt2 invalue "kdtparam"kgainmaster invalue "kgainmaster"kgainx invalue "kgainx"kgainy invalue "kgainy"kgainz invalue "kgainz"kportparam invalue "kportparam"kdtportparam invalue "kdtportparam"ka = ka + p7kb = kb + p8kc = kc + p9ka portk ka,kportparamkb portk kb,kportparamkc portk kc,kportparamkdt portk kdt,kdtportparamkdt2 portk kdt/2,kdtportparamkgainmaster portk kgainmaster,0.01kgainx portk kgainx,0.01kgainy portk kgainy,0.01kgainz portk kgainz,0.01ky init 1kz init 1kx init 1kxo init 0kyo init 0kzo init 0kynew init 0kxnew init 0kznew init 0kynewo init 0kxnewo init 0kznewo init 0kcont init 0loop:;sistema d'equacionskxnew=ka*(ky-kx)kynew=kb*kx-ky-kz*kxkznew=kx*ky-kc*kzkxo=kxkyo=kykzo=kzkxnewo=kxnewkynewo=kynewkznewo=kznewkx=kxo+kxnewo*kdtky=kyo+kynewo*kdtkz=kzo+kznewo*kdt;sistema d'equacionskxnew=ka*(ky-kx)kynew=kb*kx-ky-kz*kxkznew=kx*ky-kc*kzkx=kxo+kdt2*(kxnew+kxnewo)ky=kyo+kdt2*(kynew+kynewo)kz=kzo+kdt2*(kznew+kznewo)kcont=kcont+1if kcont!=p4 kgoto loopkcont=0asig = kgainmaster*(kx*kgainx+ky*kgainy+kz*kgainz); Optionally output to a Display object:outvalue "kdisplay", 0.5+kx/25outvalue "kdisplax", 0.5-ky/25outs asig*p5,asig*p6endin</CsInstruments><CsScore>f1	0	65536	10	1f0 120i1	0	300	1	0.75	0.25	0	0	0;i1	0	300	1	0.66	0.33	0.1	0	0;i1	0	300	1	0.33	0.66	0.2	0	0i1	0	300	1	0.25	0.75	0.3	0	0e</CsScore></CsoundSynthesizer><MacOptions>Version: 3Render: RealAsk: YesFunctions: NoneWindowBounds: 444 48 1704 744Options: -b1024 -A -o/Users/ignasi/Documents/MAC CSOUND/mis cosas/Lorenz2.aif -s -m7 -R </MacOptions><MacGUI>ioView background {65535, 65535, 65535}
ioText {13, 17} {1140, 549} label 0.000000 0.001000 "" left "Lucida Grande" 14 {0, 0, 32896} {19532, 19532, 19532} background noborder ioText {2, 7} {568, 549} label 0.000000 0.001000 "" left "Lucida Grande" 14 {0, 0, 32896} {59110, 59110, 59110} background border Lorenz Instrument                               ioText {393, 59} {169, 455} label 0.000000 0.001000 "" left "Arial" 12 {0, 0, 0} {65535, 65535, 65535} background border ioText {9, 58} {380, 456} label 0.000000 0.001000 "" left "Arial" 12 {0, 0, 0} {65535, 65535, 65535} background border ioText {327, 152} {50, 193} label 0.000000 0.001000 "" center "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground border portioSlider {204, 96} {34, 249} 0.000000 1.000000 0.816500 kparamCioSlider {83, 96} {34, 249} 1.000000 10.000000 8.141500 kparamAioSlider {143, 96} {34, 249} 14.000000 28.000000 26.650400 kparamBioText {103, 323} {24, 24} label 0.000000 0.001000 "" left "Lucida Grande" 9 {0, 0, 0} {65535, 65535, 65535} nobackground noborder 1ioText {103, 96} {26, 24} label 0.000000 0.001000 "" left "Lucida Grande" 9 {0, 0, 0} {65535, 65535, 65535} nobackground noborder 10ioText {164, 96} {25, 24} label 0.000000 0.001000 "" left "Lucida Grande" 9 {0, 0, 0} {65535, 65535, 65535} nobackground noborder 28ioText {224, 321} {24, 24} label 0.000000 0.001000 "" left "Lucida Grande" 9 {0, 0, 0} {65535, 65535, 65535} nobackground noborder 0ioText {164, 321} {25, 24} label 0.000000 0.001000 "" left "Lucida Grande" 9 {0, 0, 0} {65535, 65535, 65535} nobackground noborder 14ioText {225, 96} {24, 24} label 0.000000 0.001000 "" left "Lucida Grande" 9 {0, 0, 0} {65535, 65535, 65535} nobackground noborder 1ioText {74, 347} {62, 31} control 8.141500 0.000010 "kparamA" center "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} background border <double click to edit text>ioText {137, 347} {60, 31} control 26.650400 0.000010 "kparamB" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} background border <double click to edit text>ioText {198, 347} {63, 31} control 0.816500 0.000010 "kparamC" center "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} background border <double click to edit text>ioButton {77, 379} {59, 38} value 1.495000 "kparamA" "A1" "/" i1 0 10ioButton {137, 379} {62, 38} value 17.403400 "kparamB" "B1" "/" i1 0 10ioButton {196, 379} {62, 38} value 0.279800 "kparamC" "C1" "/" i1 0 10ioButton {77, 411} {59, 38} value 2.072800 "kparamA" "A2" "/" i1 0 10ioButton {137, 411} {62, 38} value 14.449400 "kparamB" "B2" "/" i1 0 10ioButton {196, 411} {63, 38} value 0.426600 "kparamC" "C2" "/" i1 0 10ioButton {77, 443} {59, 38} value 7.109200 "kparamA" "A3" "/" i1 0 10ioButton {137, 443} {62, 38} value 19.458000 "kparamB" "B3" "/" i1 0 10ioButton {196, 443} {63, 38} value 0.059400 "kparamC" "C3" "/" i1 0 10ioButton {196, 475} {63, 38} value 0.087100 "kparamC" "C4" "/" i1 0 10ioButton {137, 475} {62, 38} value 26.458000 "kparamB" "B4" "/" i1 0 10ioButton {77, 475} {59, 38} value 8.265600 "kparamA" "A4" "/" i1 0 10ioText {265, 347} {69, 30} control 0.028063 0.000010 "kdtparam" center "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} background border <double click to edit text>ioText {328, 320} {47, 24} display 0.010000 0.000010 "kdtportparam" left "Lucida Grande" 10 {0, 0, 0} {26214, 52428, 65535} nobackground noborder <double click to edit text>ioSlider {335, 170} {34, 150} 0.010000 10.000000 0.010000 kdtportparamioText {16, 153} {54, 188} label 0.000000 0.001000 "" center "Arial" 10 {0, 0, 0} {0, 16448, 32896} nobackground border portioSlider {22, 171} {36, 145} 0.000000 10.000000 0.000000 kportparamioText {12, 316} {57, 24} display 0.000000 0.001000 "kportparam" center "Lucida Grande" 10 {0, 0, 0} {26214, 65535, 65535} nobackground noborder <double click to edit text>ioSlider {286, 96} {34, 249} 0.000200 0.050000 0.028063 kdtparamioSlider {463, 309} {34, 166} 0.000000 5000.000000 888.500000 kgainmasterioText {454, 475} {52, 25} control 888.500000 0.001000 "kgainmaster" center "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} background border <double click to edit text>ioText {4, 33} {490, 24} label 0.000000 0.001000 "" left "Arial" 9 {0, 0, 0} {59110, 59110, 59110} background noborder The classic Lorenz equation system implemented as an audio oscillator, with variable parameters and integration time.ioText {397, 62} {36, 29} label 0.000000 0.001000 "" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder gainioText {361, 324} {24, 24} label 0.000000 0.001000 "" left "Lucida Grande" 7 {0, 0, 0} {65535, 65535, 65535} nobackground noborder sioText {51, 319} {24, 24} label 0.000000 0.001000 "" left "Lucida Grande" 7 {0, 0, 0} {65535, 65535, 65535} nobackground noborder sioText {11, 61} {76, 27} label 0.000000 0.001000 "" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder Parameters:ioText {10, 523} {177, 29} label 0.000000 0.001000 "" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder Ignasi Álvarez - 1998/2005ioMeter {576, 24} {571, 531} {44563, 53738, 65535} "kdisplay" 0.521591 "kdisplax" 0.465662 point 5 1000 notrackioText {459, 293} {56, 27} label 0.000000 0.001000 "" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder masterioText {422, 92} {110, 36} label 0.000000 0.001000 "" center "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder x         y         zioText {396, 166} {158, 39} label 0.000000 0.001000 "" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder 0 - - - - - - - - - - - - - - - ioSlider {509, 113} {34, 134} -1.000000 1.000000 0.902800 kgainzioSlider {465, 113} {34, 134} -1.000000 1.000000 0.475600 kgainyioSlider {421, 113} {34, 134} -1.000000 1.000000 -0.514800 kgainxioText {421, 248} {41, 39} control -0.514600 0.001000 "kgainx" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder <double click to edit text>ioText {461, 248} {41, 39} control 0.475600 0.001000 "kgainy" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder <double click to edit text>ioText {502, 248} {41, 39} control 0.902800 0.001000 "kgainz" left "Lucida Grande" 10 {0, 0, 0} {65535, 65535, 65535} nobackground noborder <double click to edit text></MacGUI>